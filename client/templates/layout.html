<template name="layout">
	<header class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
					<span class="sr-only">{{i18n "layout.navigationToggle"}}</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				{{#linkTo route="home" class="navbar-brand"}}{{i18n "layout.title"}}{{/linkTo}}
			</div>
			<div id="navbar-collapse" class="collapse navbar-collapse">
				<nav>
					<ul class="nav navbar-nav">
						<li>{{#linkTo route="home"}}{{i18n "layout.homeTitle"}}{{/linkTo}}</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
								{{i18n "layout.programmingLanguagesTitle"}}
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								{{#each i18nProgrammingLanguages}}
									<li>{{#linkTo route="exerciseSearch" data=this}}{{name}}{{/linkTo}}</li>
								{{/each}}
							</ul>
						</li>
						<li>{{#linkTo route="programmingEdit"}}{{i18n "layout.createExerciseTitle"}}{{/linkTo}}</li>
						<li><a href="/admin">{{i18n "layout.mongoDBAdminTitle"}}</a></li>
					</ul>
				</nav>
				<div class="navbar-right">
					<ul class="nav navbar-nav">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
								<span class="glyphicon glyphicon-globe"></span>
								{{language}}
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								{{#each languages}}
									<li class="{{#if isActive}}active{{/if}}">
										<a href="?lang={{_id}}" class="i18n lang" data-lang="{{_id}}">{{name}}</a>
									</li>
								{{/each}}
							</ul>
						</li>
						<li role="separator" class="divider-vertical"></li>
						<li>{{#linkTo route="account"}}{{#if currentUser}}{{i18n "account.title"}}{{else}}{{i18n "account.loginTitle"}}{{/if}}{{/linkTo}}</li>
					</ul>
				</div>
			</div>
		</div>
	</header>
	<div class="container">
		<div class="row">
			<main class="{{#if showAside}}col-lg-9{{else}}col-lg-12{{/if}}">
				{{#unless customTitle}}
					<h1 class="default">{{i18n "layout.title"}}</h1>
				{{/unless}}
				{{> yield}}
			</main>
			{{#if showAside}}
				<aside class="col-lg-3">
					{{> yield "aside"}}
				</aside>
			{{/if}}
		</div>
	</div>
</template>
